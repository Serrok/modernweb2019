{"version":3,"sources":["components/FormControl/index.js","components/FormGroup/FormGroup.jsx","components/FormGroup/index.js","components/HorizontalForm/withContextConsumer.jsx","components/HorizontalForm/HorizontalForm.jsx","components/HorizontalForm/index.js","components/Label/Label.jsx","components/Label/index.js","FinalFormTest.jsx","index.jsx"],"names":["FormGroup","styled","div","_templateObject","withContextConsumer","_ref","Context","context","BaseComponent","factory","React","createFactory","_React$Component","WithContextConsumer","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","key","value","_this","react_default","a","createElement","Consumer","contextProps","objectSpread","props","Component","HorizontalFormContext","createContext","FormContainer","HorizontalForm_templateObject","FormRow","_templateObject2","FormCol","_ref2","spacing","others","objectWithoutProperties","_templateObject3","Array","isArray","HorizontalForm","children","_spacing","split","reduce","acc","val","concat","trim","toConsumableArray","_spacing2","slicedToArray","s1","s2","undefined","map","s","Number","normalizeSpacingProperty","Provider","required","css","Label_templateObject","Label","label","Label_templateObject2","FinalFormTest","_ref$fieldCount","fieldCount","onSubmit","refCount","useRef","inputValues","dispInputValues","keys","n","handleSubmit","useCallback","current","react_grid_system_lib","fluid","style","padding","react_final_form_es","render","form","paddingRight","components_FormGroup","lib","btnStyle","onClick","reset","Preview","ref","maxHeight","overflowY","components_HorizontalForm","_ref3","width","index","isRequiredField","placeholder","name","_ref4","input","meta","_useState","useState","_useState2","setValue","_useState3","touched","_useState4","setTouched","error","useMemo","useEffect","updateValues","innerHTML","JSON","stringify","whiteSpace","components_Label","react_form_control_lib","type","onBlur","onChange","e","target","FieldError","FinalFormTest_templateObject","pre","FinalFormTest_templateObject2","values","window","alert","ReactDOM","src_FinalFormTest","document","getElementById"],"mappings":"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","file":"static/js/main.e8455846.chunk.js","sourcesContent":["import '@trendmicro/react-form-control/dist/react-form-control.css';\nimport FormControl, { Input, Select, Textarea } from '@trendmicro/react-form-control';\n\nexport { Input, Select, Textarea };\nexport default FormControl;\n","import styled from 'styled-components';\n\nconst FormGroup = styled.div`\n    margin-bottom: 1rem;\n`;\n\nexport default FormGroup;\n","import FormGroup from './FormGroup';\n\nexport default FormGroup;\n","import React from 'react';\nimport setDisplayName from 'recompose/setDisplayName';\nimport wrapDisplayName from 'recompose/wrapDisplayName';\n\nconst withContextConsumer = ({ context: Context }) => BaseComponent => {\n    const factory = React.createFactory(BaseComponent);\n\n    class WithContextConsumer extends React.Component {\n        render() {\n            return (\n                <Context.Consumer>\n                    {(contextProps) => factory({\n                        ...contextProps,\n                        ...this.props\n                    })}\n                </Context.Consumer>\n            );\n        }\n    }\n\n    if (process.env.NODE_ENV === 'development') {\n        return setDisplayName(wrapDisplayName(BaseComponent, 'withContextConsumer'))(WithContextConsumer);\n    }\n\n    return WithContextConsumer;\n};\n\nexport default withContextConsumer;\n","import React from 'react';\nimport styled from 'styled-components';\nimport withContextConsumer from './withContextConsumer';\n\nconst HorizontalFormContext = React.createContext();\n\nconst normalizeSpacingProperty = spacing => {\n    if (typeof spacing === 'string') {\n        spacing = spacing.split(' ').reduce((acc, val) => {\n            if (val) {\n                acc = acc.concat(val.trim());\n            }\n            return acc;\n        }, []);\n    } else {\n        spacing = [...spacing];\n    }\n\n    let [s1, s2] = spacing;\n    s1 = s1 || 0;\n    s2 = (s2 !== undefined && s2 !== null) ? (s2 || 0) : s1;\n\n    // number to px\n    spacing = [s1, s2].map(s => (Number(s) > 0 ? `${s}px` : s));\n\n    return spacing;\n};\n\n/**\n * The spacing property may be specified as either one or two values:\n * ```\n * spacing: <length> <length>? | [<length>, <length>?]\n * ```\n *\n * When one `<length>` value is specified, it defines both the horizontal and vertical spacings between cells.\n * When two `<length>` values are specified, the first value defines the horizontal spacing between cells (i.e., the space between cells in adjacent columns), and the second value defines the vertical spacing between cells (i.e., the space between cells in adjacent rows).\n */\nconst HorizontalForm = ({ spacing, children }) => {\n    // The normalizeSpacingProperty() function will return an array containing both the horizontal and vertical spacing.\n    spacing = normalizeSpacingProperty(spacing);\n\n    return (\n        <HorizontalFormContext.Provider value={{ spacing }}>\n            {(typeof children === 'function')\n                ? children({ FormContainer, FormRow, FormCol })\n                : children\n            }\n        </HorizontalFormContext.Provider>\n    );\n};\n\nconst FormContainer = styled.div`\n    display: table;\n`;\n\nconst FormRow = styled.div`\n    display: table-row;\n`;\n\nconst FormCol = withContextConsumer({\n    context: HorizontalFormContext,\n})(styled(\n    /* Avoid passing unknown props to the underlying element. */\n    ({ spacing, ...others }) => <div {...others} />\n)`\n    display: table-cell;\n    padding-bottom: ${props => (Array.isArray(props.spacing) ? props.spacing[1] : 0)};\n\n    // No padding for the last row.\n    ${FormRow}:last-child > & {\n        padding-bottom: 0;\n    }\n\n    & + & {\n        padding-left: ${props => (Array.isArray(props.spacing) ? props.spacing[0] : 0)};\n    }\n`);\n\nexport { FormContainer, FormRow, FormCol };\nexport default HorizontalForm;\n","import HorizontalForm, { FormContainer, FormRow, FormCol } from './HorizontalForm';\n\nexport { FormContainer, FormRow, FormCol };\nexport default HorizontalForm;\n","import styled, { css } from 'styled-components';\n\nconst required = css`\n    &::after {\n        content: '*';\n        color: #db3d44;\n    }\n`;\n\nconst Label = styled.label`\n    display: inline-block;\n    margin-bottom: .5rem;\n\n    ${props => props.required && required}\n`;\n\nexport default Label;\n","import Label from './Label';\n\nexport default Label;\n","import styled from 'styled-components';\nimport React, { useRef, useState, useEffect, useMemo } from 'react';\nimport { Form, Field } from 'react-final-form';\nimport { Button } from './components/Buttons';\nimport { Input } from './components/FormControl';\nimport FormGroup from './components/FormGroup';\nimport { Container, Row, Col } from './components/GridSystem';\nimport HorizontalForm from './components/HorizontalForm';\nimport Label from './components/Label';\n\nconst required = value => (value ? undefined : 'Required field.')\n\nconst FinalFormTest = ({ fieldCount = 0, onSubmit }) => {\n    const refCount = useRef(0);\n    const inputValues = React.useRef({});\n    const dispInputValues = React.useRef(null);\n    const keys = [...Array(fieldCount).keys()]\n        .map(n => n + 1);\n    const handleSubmit = React.useCallback(() => {\n        onSubmit(inputValues.current);\n    });\n\n    return (\n        <Container fluid style={{ padding: '1rem 1.5rem' }}>\n            <Form\n                onSubmit={handleSubmit}\n                render={({ form }) => (\n                    <Row>\n                        <Col style={{ paddingRight: '1rem' }}>\n                            <h2>React Final Form Performance Optimization</h2>\n                            <p>Click <strong>Reset</strong> and input something for the first 10 text fields (marked as required). Your goal is to minimze the form render count without exceeding 2 renders for a successful form submission. So each time you make change to a text field, it will not rerender the whole form on every change.</p>\n                            <FormGroup>\n                                <strong>Form fields:</strong> {fieldCount}\n                            </FormGroup>\n                            <FormGroup>\n                                <strong>Form render count:</strong> {++refCount.current}\n                            </FormGroup>\n                            <FormGroup>\n                                <Button\n                                    btnStyle=\"primary\"\n                                    onClick={handleSubmit}\n                                >\n                                    Submit\n                                </Button>\n                                <Button\n                                    btnStyle=\"default\"\n                                    onClick={() => {\n                                        form.reset();\n                                        refCount.current = 0;\n                                    }}\n                                >\n                                    Reset\n                                </Button>\n                            </FormGroup>\n                            <Preview>\n                                <span ref={dispInputValues} />\n                            </Preview>\n                        </Col>\n                        <Col style={{ maxHeight: 'calc(100vh - 2rem)', overflowY: 'auto' }}>\n                            <HorizontalForm spacing={['.75rem', '.5rem']}>\n                                {({ FormContainer, FormRow, FormCol }) => (\n                                    <FormContainer style={{ width: '100%' }}>\n                                        {keys.map((key, index) => {\n                                            const isRequiredField = (index < 10);\n                                            const placeholder = isRequiredField ? 'Required field' : 'Optional field';\n\n                                            return (\n                                                <Field\n                                                    name={`field${key}`}\n                                                    key={key}\n                                                >\n                                                    {({ input, meta }) => {\n                                                        const [value, setValue] = useState(input.value);\n                                                        const [touched, setTouched] = useState(meta.touched);\n                                                        const error = useMemo(() => {\n                                                            return isRequiredField ? required(value) : null;\n                                                        }, [value, touched]);\n                                                        useEffect(() => {\n                                                            let updateValues = { ...inputValues.current };\n                                                            updateValues[input.name] = value;\n                                                            for (let key in updateValues) {\n                                                                if (updateValues[key] === '') {\n                                                                    delete updateValues[key];\n                                                                }\n                                                            }\n                                                            inputValues.current = updateValues;\n                                                            dispInputValues.current.innerHTML = JSON.stringify(updateValues, 0, 2);\n                                                        }, [value]);\n\n                                                        return (\n                                                            <FormRow>\n                                                                <FormCol style={{ width: '1%', whiteSpace: 'nowrap' }}>\n                                                                    <Label required={isRequiredField}>\n                                                                        Field {key}\n                                                                    </Label>\n                                                                </FormCol>\n                                                                <FormCol>\n                                                                    <Input\n                                                                        type=\"text\"\n                                                                        name={input.name}\n                                                                        onBlur={() => setTouched(true)}\n                                                                        onChange={e => setValue(e.target.value)}\n                                                                        value={value}\n                                                                        placeholder={placeholder}\n                                                                    />\n                                                                    {error && touched && <FieldError>{error}</FieldError>}\n                                                                </FormCol>\n                                                            </FormRow>\n                                                        );\n                                                    }}\n                                                </Field>\n                                            );\n                                        })}\n                                    </FormContainer>\n                                )}\n                            </HorizontalForm>\n                        </Col>\n                    </Row>\n                )}\n            />\n        </Container>\n    );\n};\n\nexport default FinalFormTest;\n\nconst FieldError = styled.div`\n    color: #db3d44;\n`;\n\nconst Preview = styled.pre`\n    background-color: #f7f8f9;\n    padding: .75rem 1rem;\n`;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport FinalFormTest from './FinalFormTest';\n\nconst handleSubmit = values => {\n    window.alert(JSON.stringify(values, 0, 2));\n};\n\nconst App = () => {\n    return (\n        <FinalFormTest\n            fieldCount={1000}\n            onSubmit={handleSubmit}\n        />\n    );\n};\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}